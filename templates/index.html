<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Ã‰cole de Mama Binta</title>

<link rel="manifest" href="/static/manifest.json">

<!-- CHARGEMENT DU GÃ‰NÃ‰RATEUR -->
<script src="/static/generator.js"></script>

<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/static/sw.js");
}
</script>

<style>
body {
    font-family: Arial;
    background: #fef6e4;
    text-align: center;
    padding: 30px;
}
h1 { color: #f582ae; }
button {
    font-size: 18px;
    padding: 12px 20px;
    margin: 6px;
    border-radius: 10px;
    border: none;
    background: #8bd3dd;
}
.choice { background: #ffd803; }
#box {
    margin-top: 20px;
    font-size: 20px;
    white-space: pre-line;
}
#teacher {
    background: #fde68a;
    padding: 15px;
    border-radius: 15px;
}
</style>
</head>

<body>

<h1>Ã‰cole de Mama Binta ğŸ‘§ğŸ“š</h1>

<div id="teacher">
ğŸ‘©ğŸ¾â€ğŸ« La maÃ®tresse intelligente est avec toi
</div>

<button onclick="startReading()">ğŸ“– Lecture</button>
<button onclick="startMaths()">â• Maths</button>

<div id="box"></div>

<script>
let current = null;

/* ---- VOIX ---- */
function speak(text) {
    if (!("speechSynthesis" in window)) return;
    speechSynthesis.cancel();
    const u = new SpeechSynthesisUtterance(text);
    u.lang = "fr-FR";
    u.rate = 0.85;
    u.pitch = 1.2;
    speechSynthesis.speak(u);
}

/* ---- LECTURE ---- */
function startReading() {
    current = generateReadingQuestion();
    showQuestion();
}

/* ---- MATHS ---- */
function startMaths() {
    current = generateMathQuestion();
    showQuestion();
}

/* ---- AFFICHAGE ---- */
function showQuestion() {
    let html = current.question + "\n\n";
    current.choices.forEach(c => {
        html += `<button class="choice" onclick="checkAnswer('${c}')">${c}</button><br>`;
    });
    document.getElementById("box").innerHTML = html;
    speak(current.question);
}

/* ---- RÃ‰PONSE ---- */
function checkAnswer(choice) {
    if (choice === current.answer) {
        document.getElementById("box").innerText = "Bravo Mama Binta ğŸ‰";
        speak("Bravo Mama Binta !");
    } else {
        document.getElementById("box").innerText = "Essaie encore ğŸ˜Š";
        speak("Essaie encore.");
    }
}
</script>

</body>
</html>
