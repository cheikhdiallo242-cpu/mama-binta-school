<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Ã‰cole de Mama Binta</title>

    <!-- PWA -->
    <link rel="manifest" href="/static/manifest.json">

    <script>
    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.register("/static/sw.js");
    }
    </script>

    <style>
    body {
        font-family: Arial, sans-serif;
        background: #fef6e4;
        text-align: center;
        padding: 30px;
    }

    h1 { color: #f582ae; }

    button {
        font-size: 18px;
        padding: 12px 20px;
        margin: 6px;
        border: none;
        border-radius: 10px;
        background: #8bd3dd;
        cursor: pointer;
    }

    button:hover { background: #5ec2c9; }

    .choice { background: #ffd803; }

    #box {
        margin-top: 20px;
        font-size: 20px;
        white-space: pre-line;
    }

    #score {
        margin-top: 20px;
        font-size: 18px;
        background: #e3f6f5;
        padding: 10px;
        border-radius: 10px;
        display: inline-block;
    }

    #teacher {
        background: #fde68a;
        padding: 15px;
        border-radius: 15px;
        margin-bottom: 20px;
        font-size: 18px;
    }
    </style>
</head>

<body>

<h1>Ã‰cole de Mama Binta ğŸ‘§ğŸ“š</h1>

<div id="teacher">
    ğŸ‘©ğŸ¾â€ğŸ« <b>La maÃ®tresse est lÃ </b><br>
    Elle explique et tâ€™aide Ã  apprendre ğŸ’›
</div>

<div id="score">
    â­ Points : <span id="points">0</span><br>
    ğŸ… Niveau : <span id="level">1</span>
</div>

<h2>ğŸ‘©ğŸ¾â€ğŸ« Mode MaÃ®tresse</h2>
<button onclick="teacherLesson()">LeÃ§on avec explication</button>
<button onclick="teacherExercise()">Question de la maÃ®tresse</button>

<div id="box"></div>

<script>
let correctAnswer = null;
let points = 0;
let level = 1;

/* ---------- SCORE ---------- */
function updateScore() {
    document.getElementById("points").innerText = points;
    document.getElementById("level").innerText = level;
}

function addPoint() {
    points++;
    if (points % 5 === 0) level++;
    updateScore();
}

/* ---------- VOIX ---------- */
function speak(text) {
    if (!("speechSynthesis" in window)) return;

    window.speechSynthesis.cancel();

    const msg = new SpeechSynthesisUtterance(text);
    msg.lang = "fr-FR";
    msg.rate = 0.85;
    msg.pitch = 1.2;

    window.speechSynthesis.speak(msg);
}

/* ---------- MODE MAÃTRESSE ---------- */

function teacherLesson() {
    const text =
        "Bonjour Mama Binta. Aujourdâ€™hui, nous allons apprendre la lecture. " +
        "Un mot est composÃ© de lettres. " +
        "Par exemple : le mot chat commence par la lettre C. " +
        "RÃ©pÃ¨te aprÃ¨s moi : chat.";

    document.getElementById("box").innerText = text;
    speak(text);
}

function teacherExercise() {
    const question =
        "Ã‰coute bien. Quel mot commence par la lettre B ?";

    correctAnswer = "Banane";

    let html = question + "\n\n";
    ["Chat", "Banane", "Soleil"].forEach(c => {
        html += `<button class="choice" onclick="check('${c}')">${c}</button><br>`;
    });

    document.getElementById("box").innerHTML = html;
    speak(question);
}

/* ---------- CHECK ---------- */
function check(choice) {
    if (choice === correctAnswer) {
        addPoint();
        const text = "Bravo Mama Binta. Tu as bien rÃ©pondu. Continue comme Ã§a.";
        document.getElementById("box").innerText = text;
        speak(text);
    } else {
        const text = "Ce nâ€™est pas grave. RÃ©flÃ©chis encore. Tu peux y arriver.";
        document.getElementById("box").innerText = text;
        speak(text);
    }
}
</script>

</body>
</html>
