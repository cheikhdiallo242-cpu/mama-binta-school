<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Ã‰cole de Mama Binta</title>

<link rel="manifest" href="/static/manifest.json">
<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/static/sw.js");
}
</script>

<style>
body { font-family: Arial; background:#fef6e4; text-align:center; padding:30px; }
h1 { color:#f582ae; }
button { font-size:18px; padding:12px 20px; margin:6px; border-radius:10px; border:none; background:#8bd3dd; }
.choice { background:#ffd803; }
#box { margin-top:20px; font-size:20px; white-space:pre-line; }
#teacher { background:#fde68a; padding:15px; border-radius:15px; }
#score { margin-top:15px; background:#e3f6f5; padding:10px; border-radius:10px; }
</style>
</head>

<body>

<h1>Ã‰cole de Mama Binta ğŸ‘§ğŸ“š</h1>

<div id="teacher">ğŸ‘©ğŸ¾â€ğŸ« La maÃ®tresse est lÃ  pour tâ€™aider</div>

<div id="score">
â­ Points : <span id="points">0</span> | ğŸ… Niveau : <span id="level">1</span>
</div>

<button onclick="teacherLesson()">LeÃ§on de la maÃ®tresse</button>
<button onclick="teacherExercise()">Question de la maÃ®tresse</button>

<div id="box"></div>

<script>
let points = 0, level = 1, current = null;

/* -------- VOIX -------- */
function speak(t){
    if(!("speechSynthesis" in window)) return;
    speechSynthesis.cancel();
    let u=new SpeechSynthesisUtterance(t);
    u.lang="fr-FR"; u.rate=0.85; u.pitch=1.2;
    speechSynthesis.speak(u);
}

/* -------- SCORE -------- */
function addPoint(){
    points++;
    if(points%5===0) level++;
    document.getElementById("points").innerText=points;
    document.getElementById("level").innerText=level;
}

/* -------- BANQUE DE LEÃ‡ONS -------- */
const lessons = [
"Un mot est composÃ© de lettres. Chaque lettre a un son.",
"Pour bien lire, regarde chaque lettre doucement.",
"Une phrase commence par une majuscule et finit par un point."
];

/* -------- BANQUE DE QUESTIONS -------- */
const questions = [
{q:"Quel mot commence par la lettre B ?", c:["Banane","Chat","Soleil"], a:"Banane"},
{q:"Quel mot est un animal ?", c:["Maison","Chat","Table"], a:"Chat"},
{q:"Quel mot commence par la lettre M ?", c:["Moto","Banane","Ã‰cole"], a:"Moto"},
{q:"Quel mot est un fruit ?", c:["Banane","Chaise","Livre"], a:"Banane"},
{q:"Quel mot commence par la lettre S ?", c:["Soleil","Chat","Moto"], a:"Soleil"}
];

/* -------- LEÃ‡ON -------- */
function teacherLesson(){
    const text = lessons[Math.floor(Math.random()*lessons.length)];
    document.getElementById("box").innerText=text;
    speak("Ã‰coute bien. " + text);
}

/* -------- QUESTION -------- */
function teacherExercise(){
    current = questions[Math.floor(Math.random()*questions.length)];
    let html = current.q + "\n\n";
    current.c.forEach(x=>{
        html += `<button class="choice" onclick="check('${x}')">${x}</button><br>`;
    });
    document.getElementById("box").innerHTML = html;
    speak(current.q);
}

/* -------- CHECK -------- */
function check(x){
    if(x===current.a){
        addPoint();
        speak("Bravo Mama Binta. Bonne rÃ©ponse.");
        document.getElementById("box").innerText="Bravo ğŸ‰";
    }else{
        speak("Ce nâ€™est pas grave. Essaie encore.");
        document.getElementById("box").innerText="Essaie encore ğŸ˜Š";
    }
}
</script>

</body>
</html>
